<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reflective Journal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            color: #333;
        }
        #formContainer {
            margin-top: 20px;
        }
        .gdpr-warning {
            color: #d9534f; /* Bootstrap danger color */
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <h1>Reflective Journal</h1>
    <p class="gdpr-warning">⚠️ By using this journal, you agree that a unique identifier will be stored in your browser to recall your previous entries. This identifier will not be shared with any third parties.</p>
    <p id="infoText">Loading your journal entry...</p>
    
    <div id="formContainer"></div>

    <script>
        // Function to generate a random unique UUID
        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Get or create User ID
        function getUserId() {
            let userId = localStorage.getItem('userId');
            if (!userId) {
                userId = generateUUID();
                localStorage.setItem('userId', userId);
            }
            return userId;
        }

        const userId = getUserId();

        // Google Form URL with prefilled User ID
        const formUrl = `https://docs.google.com/forms/d/e/1IpTKO0gEXF95KPxHOsikI2jr2mrPXYaOX5NCJbnYK1E/viewform?usp=pp_url&entry.1234567890=${userId}`;
        // Note: Replace entry.1234567890 with the actual entry ID for the User ID field in your Google Form.

        document.getElementById('formContainer').innerHTML = `<iframe src="${formUrl}" width="100%" height="600px" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>`;
    </script>

</body>
</html>
